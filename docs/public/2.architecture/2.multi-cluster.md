---
title: Multi-Cluster
description: How Kuberise.io supports multiple clusters and environments.
---

## Cluster Concept

Each deployment gets:
- `app-of-apps/values-<name>.yaml` — which tools are enabled (named after the deploy/layer name, e.g. `shared`)
- `values/<cluster>/` — cluster-specific configuration (named after the cluster)

All clusters share the same charts in `charts/` and the same external chart references in `app-of-apps/values.yaml`.

## Scenarios

### Single Cluster (e.g. Local Development)

For local development with minikube, KIND, k3d, etc or any single cluster setup. — all platform services and applications run in one cluster.

```
app-of-apps/
  values.yaml              # defaults
  values-tools.yaml        # enables tools (deploy name: tools)
  values-webshop.yaml      # enables developer applications (deploy name: webshop)
values/
  onprem/platform/         # tools configuration (e.g. ArgoCD, cert-manager, keycloak, etc. cluster name: onprem)
  onprem/applications/     # developer applications configuration (e.g. webshop, etc. cluster name: onprem)
```

### Platform + Application Clusters

A typical production setup separates platform services from application workloads:

- **Platform cluster** — hosts shared tools (ArgoCD, Grafana, Keycloak, etc.)
- **Application clusters** — host business applications (dev, test, prod)

```
app-of-apps/
  values.yaml
  values-tools.yaml       # enables tools (deploy name: tools)
  values-devapps.yaml     # enables apps in dev (deploy name: devapps)
  values-testapps.yaml    # enables apps in test (deploy name: testapps)
  values-prodapps.yaml    # enables apps in prod (deploy name: prodapps)
values/
  shared/                 # shared cluster config
  dev/                    # dev cluster config
  test/                   # test cluster config
  prod/                   # prod cluster config
```

## Cluster Naming Convention

Cluster names follow the pattern: `[environment]-[type]-[provider]-[region]`

Examples: `prod-app-aws-frankfurt`, `dev-shared-onprem-one`, `acc-app-gcp-groningen`

## Deploying Per Cluster

Each cluster requires its own `kr init` and one or multiple `kr deploy` invocations:

```bash
kr init --context k3d-shared --cluster shared --domain shared.kuberise.dev

kr deploy --context k3d-shared --cluster shared  --name tools \
  --repo <REPO_URL> --revision main --domain shared.kuberise.dev

kr init --context k3d-dev --cluster dev --domain dev.kuberise.dev

kr deploy --context k3d-dev --cluster dev --name devapps \
  --repo <REPO_URL> --revision main --domain dev.kuberise.dev
```

Multiple layers can be deployed to the same cluster by calling `kr deploy` with different `--name` values. The `--name` controls the enabler file (`values-{name}.yaml`), while `--cluster` controls the values folder (`values/{cluster}/`).
