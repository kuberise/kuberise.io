---
title: Installation
description: How to install Kuberise.io on your Kubernetes cluster.
---

## Steps

### 1. Install the `kr` CLI

```bash
curl -sSL https://raw.githubusercontent.com/kuberise/kuberise.io/main/scripts/install-kr.sh | sh
```

Or download `kr` manually from [GitHub Releases](https://github.com/kuberise/kuberise.io/releases) and place it on your `PATH`.

### 2. Bootstrap the Cluster

`kr init` sets up the cluster prerequisites: namespaces, secrets, CA certificates, and ArgoCD. No repository clone is needed. Optionally, pass `--cilium` to also install Cilium as the CNI.

```bash
kr init \
  --context <CONTEXT> \
  --cluster <NAME> \
  --domain <DOMAIN>
```

| Flag | Description |
|------|-------------|
| `--context` | **(required)** Kubernetes context name (`kubectl config current-context`) |
| `--domain` | **(required)** Base domain for services, e.g. `onprem.kuberise.dev` |
| `--cluster` | Cluster name (default: `onprem`) |
| `--admin-password` | Admin password for platform services (default: `admin`, warns if default) |

Run `kr init --help` for the full list of flags and environment variables.

### 3. Deploy a Layer

`kr deploy` creates an app-of-apps ArgoCD Application pointing at your Git repository. ArgoCD then syncs all the platform tools.

```bash
kr deploy \
  --context <CONTEXT> \
  --cluster <NAME> \
  --repo <REPO_URL> \
  --revision <REVISION> \
  --domain <DOMAIN> \
  [--token <TOKEN>]
```

| Flag | Description |
|------|-------------|
| `--context` | **(required)** Kubernetes context name |
| `--repo` | **(required)** URL of your forked repository |
| `--cluster` | Cluster name (default: `onprem`) |
| `--domain` | Base domain for services (default: `onprem.kuberise.dev`) |
| `--revision` | Branch, tag, or commit SHA, e.g. `main` (default: `HEAD`) |
| `--name` | Layer identifier, used to deploy multiple layers (default: `platform`) |
| `--token` | Git token for private repos (optional) |
| `--values-repo` | Separate Git repo for cluster values (default: same as `--repo`) |
| `--defaults-repo` | Separate Git repo for default values (default: same as `--repo`) |

Run `kr deploy --help` for the full list of flags.

### 4. Example

```bash
kr init \
  --context minikube \
  --cluster onprem \
  --domain onprem.kuberise.dev

kr deploy \
  --context minikube \
  --cluster onprem \
  --repo https://github.com/<your-username>/kuberise.io.git \
  --revision main \
  --domain onprem.kuberise.dev
```

`kr init` will:
1. Validate required CLI tools and cluster connectivity
2. Create namespaces and secrets
3. Generate CA certificates
4. Install ArgoCD
5. Install Cilium if `--cilium` is passed (minimal CNI bootstrap)
6. Configure OAuth2 client secrets

`kr deploy` will:
1. Create repository access secrets for ArgoCD
2. Create an ArgoCD AppProject
3. Create the app-of-apps ArgoCD Application
4. ArgoCD then syncs all enabled tools from your repository

## Multi-Layer Deployment

You can deploy multiple layers (OSS, Pro, Client) by running `kr deploy` multiple times with different `--name` values. Each layer gets its own ArgoCD app-of-apps Application and separate repo secrets.

```bash
# OSS layer (default --name is "platform")
kr deploy --context k3d-dev --cluster dev-app-onprem-one \
  --repo https://github.com/kuberise/kuberise.io.git \
  --revision v0.3.0 --domain dev.kuberise.dev

# Pro layer
kr deploy --context k3d-dev --cluster dev-app-onprem-one \
  --repo https://github.com/kuberise/kuberise-pro.git \
  --name pro --revision v0.3.0 --domain dev.kuberise.dev \
  --token $TOKEN

# Client layer
kr deploy --context k3d-dev --cluster dev-app-onprem-one \
  --repo https://github.com/org/client.git \
  --name acme --revision main --domain dev.kuberise.dev \
  --token $TOKEN
```

## Post-Installation

After installation, access dashboards via subdomains of your domain:

- ArgoCD: `https://argocd.<DOMAIN>`
- Grafana: `https://grafana.<DOMAIN>`

Both `kr init` and `kr deploy` are **idempotent** - you can run them multiple times safely.

## Uninstall

```bash
kr uninstall --context <CONTEXT> --cluster <NAME>
```

This removes the app-of-apps, ArgoCD, all kuberise-managed namespaces, and cleans up kubeconfig entries. Cilium (the CNI) is intentionally left in place since the cluster needs it for networking.
