---
title: Installation
description: How to install Kuberise.io on your Kubernetes cluster.
---

## Steps

### 1. Install the `kr` CLI

```bash
curl -sSL https://kuberise.io/install | sh
```

To install a specific version, set `KR_VERSION` for the shell that runs the script: `curl -sSL https://kuberise.io/install | KR_VERSION=0.3.0 sh`

Or download `kr` manually from [GitHub Releases](https://github.com/kuberise/kuberise.io/releases) and place it on your `PATH`.

### 2. Bootstrap the Cluster

`kr init` sets up the cluster prerequisites: namespaces, secrets, CA certificates, and ArgoCD. No repository clone is needed. Optionally, pass `--cilium` to also install Cilium as the CNI.

```bash
kr init \
  --context <CONTEXT> \
  --cluster <NAME> \
  --domain <DOMAIN>
```

| Flag | Description |
|------|-------------|
| `--context` | **(required)** Kubernetes context name (`kubectl config current-context`) |
| `--domain` | **(required)** Base domain for services, e.g. `onprem.kuberise.dev` |
| `--cluster` | Cluster name (default: `onprem`) |
| `--admin-password` | Admin password for platform services (default: `admin`, warns if default) |

Run `kr init --help` for the full list of flags and environment variables.

### 3. Deploy a Layer

`kr deploy` creates an app-of-apps ArgoCD Application pointing at your Git repository. ArgoCD then syncs all the platform tools.

```bash
kr deploy \
  --context <CONTEXT> \
  --cluster <NAME> \
  --repo <REPO_URL> \
  --revision <REVISION> \
  --domain <DOMAIN> \
  [--token <TOKEN>] \
  [--values-repo <URL>] [--values-token <TOKEN>] \
  [--defaults-repo <URL>] [--defaults-token <TOKEN>]
```

| Flag | Description |
|------|-------------|
| `--context` | **(required)** Kubernetes context name |
| `--repo` | **(required)** URL of your forked repository |
| `--cluster` | Cluster name (default: `onprem`) |
| `--domain` | Base domain for services (default: `onprem.kuberise.dev`) |
| `--revision` | Branch, tag, or commit SHA, e.g. `main` (default: `HEAD`) |
| `--name` | Layer identifier, used to deploy multiple layers (default: `shared`) |
| `--dry-run` | Preview manifests without applying changes. |
| `--token` | Git token for private repos. Used as fallback for all repos (optional) |
| `--values-repo` | Separate Git repo for cluster values (default: same as `--repo`) |
| `--values-revision` | Revision for the values repo (default: same as `--revision`) |
| `--values-token` | Git token for the values repo (default: same as `--token`) |
| `--defaults-repo` | Separate Git repo for default values (default: same as `--repo`) |
| `--defaults-revision` | Revision for the defaults repo (default: same as `--revision`) |
| `--defaults-token` | Git token for the defaults repo (default: same as `--token`) |

Run `kr deploy --help` for the full list of flags.

### 4. Example

```bash
kr init \
  --context minikube \
  --cluster onprem \
  --domain onprem.kuberise.dev

kr deploy \
  --context minikube \
  --cluster onprem \
  --repo https://github.com/<your-username>/kuberise.io.git \
  --revision main \
  --domain onprem.kuberise.dev
```

`kr init` will:
1. Validate required CLI tools and cluster connectivity
2. Create namespaces and secrets
3. Generate CA certificates
4. Install ArgoCD
5. Install Cilium if `--cilium` is passed
6. Configure OAuth2 client secrets

`kr deploy` will:
1. Create repository access secrets for ArgoCD
2. Create an ArgoCD AppProject
3. Create the app-of-apps ArgoCD Application
4. ArgoCD then syncs all enabled tools from your repository

## Multi-Layer Deployment

You can deploy multiple layers by running `kr deploy` multiple times with different `--name` values. Each layer gets its own ArgoCD app-of-apps Application and separate repo secrets.

For example, one layer can deploy the platform charts with default values overridden by client-specific configuration, while another layer can deploy client-specific platform or developer charts with their own values.

```bash
# Platform layer (default --name is "shared")
# Deploys OSS charts with default values, overridden by client-specific values
kr deploy --context k3d-dev --cluster dev-app-onprem-one \
  --repo https://github.com/kuberise/kuberise.io.git \
  --values-repo https://github.com/org/client.git \
  --values-token $CLIENT_TOKEN \
  --revision 0.3.0 --domain dev.kuberise.dev

# Client layer
# Deploys client-specific charts and values
kr deploy --context k3d-dev --cluster dev-app-onprem-one \
  --repo https://github.com/org/client.git \
  --name webshop --revision main --domain dev.kuberise.dev \
  --token $TOKEN
```

Each repository can use its own Git token. When repos belong to the same account, a single `--token` is enough - it is used as the fallback for all three repos. When repos belong to different accounts or providers, use `--values-token` and `--defaults-token` to provide separate credentials.

## Post-Installation

After installation, access dashboards via subdomains of your domain:

- ArgoCD: `https://argocd.<DOMAIN>`
- Grafana: `https://grafana.<DOMAIN>`

Both `kr init` and `kr deploy` are **idempotent** - you can run them multiple times safely.

## Uninstall

```bash
kr uninstall --context <CONTEXT> --cluster <NAME>
```

This removes the app-of-apps, ArgoCD, all kuberise-managed namespaces, and cleans up kubeconfig entries. Cilium (the CNI) is intentionally left in place since the cluster needs it for networking.
